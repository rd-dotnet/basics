<img src="..\..\resources\EPAM_LOGO_Primary.png?raw=true" width="330" />

# ADO.NET

##  Задание

**Note**: В качестве базы данных используйте любую доступную вам базу. Это
    может быть общедоступная база
    [NothWind](https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql/linq/downloading-sample-databases)
    или любая база из курса по проектированию баз данных.

**Note**: Выбранная для работы таблица должна содержать несоставной Primary
    Key, желательно (но не обязательно) числового типа.

### Основное

Имея базу данных с любой таблицей, создайте следующие классы:

-   Класс для описания сущности таблицы

    -   ***<u>В качестве имени класса используйте название вашей
        таблицы.</u>***

    -   У класса должны быть публичные
        [авто-свойства](https://docs.microsoft.com/ru-ru/dotnet/csharp/programming-guide/classes-and-structs/auto-implemented-properties),
        которые представляют колонки выбранной вами таблицы.

-   Класс `MyTableService` (***<u>где MyTable имя выбранной вами
    таблицы</u>***), содержащий методы для CRUD операций над таблицей:

    -   `Get(ключ)` – возвращает запись из таблицы (объект класса `MyTable`)
        в базе данных по ключу.

    -   `Get(int top)` – возвращает top записей (List&lt;MyTable&gt;) из
        таблицы в базе данных. Если top &lt;= 0, то возвращает все
        записи.

    -   `Insert(MyTable)` – вставляет сущность в таблицу в базе данных.
        Метод должен вернуть `true`, если получилось добавить запись и
        `false` – если нет (например, когда в базе уже есть запись с таким
        ключом).

    -   `Update(ключ, MyTable)` – обновляет все колонки записи в базе
        данных с ключом «ключ» на значения полей переданного объекта.

    -   `Delete(ключ)` – удаляет запись из таблицы в базе данных. Метод
        возвращает `true` если запись удалена и `false`, если такой записи
        не было.

В качестве технологии использовать присоединённый режим ADO.NET.

Все параметризованные запросы должны оформляться через [параметры
команды](https://docs.microsoft.com/ru-ru/dotnet/framework/data/adonet/commands-and-parameters).

### Дополнительное

Создать консольное приложение, демонстрирующее работу созданного класса
`MyTableService`. Реализовать обработку всех возможных исключений, чтобы
при ошибке приложение не аварийно завершалось, а отрисовывало в консоль
сообщение об ошибке. Предоставить пользователю возможность ввода полей
для формирования сущности записи вашей таблицы (при выполнении операции
`Insert` и `Update`

### Задание со звёздочкой

Необязательное задание.

Разработанное из задания 1.2 консольное приложение должно содержать меню
с выбором операций:

<img src="task_media\media\image2.png" style="width:2.96667in;height:1.18333in" />

В случае ошибки приложение должно отображать текст ошибки и предложить
пользователю завершить работу или вернуться в главное меню.

### Задание со звёздочкой

Необязательное задание.

-   Реализовать возможность автогенерации ключа на стороне SQL сервера
    используя при формировании ключевой колонки ключевое слово IDENTITY.

-   Доработать `MyTableService` следующим образом:

    -   Метод Insert не должен рассчитывать на то, что в объекте `MyTable`
        будет проинициализировано свойство с ключом.

    -   При вставке новой записи метод Insert НЕ должен передавать ключ
        в качестве параметра запроса, заставляя тем самым SQL сервер
        сгенерировать этот ключ.

    -   Метод `Insert` должен возвращать вставленную сущность с
        инициализированным свойством ключа. Не посылать отдельный запрос
        для получения сгенерированного ключа. Для его получения
        ознакомьтесь с вариантами в интернете (например
        [тут](https://dba.stackexchange.com/a/124863)).
